<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LDoc documentation</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LDoc</h1>





<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/colon.lua.html">colon.lua</a></li>
  <li><a href="../examples/four.lua.html">four.lua</a></li>
  <li><a href="../examples/three.lua.html">three.lua</a></li>
  <li><a href="../examples/multiple.lua.html">multiple.lua</a></li>
  <li><strong>mylib.c</strong></li>
  <li><a href="../examples/List.moon.html">List.moon</a></li>
</ul>
<h2>Programs</h2>
<ul class="nowrap">
  <li><a href="../index.html">ldoc</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/manual.md.html">manual</a></li>
</ul>

</div>

<div id="content">

    <h2>mylib.c</h2>
<pre>
<span class="comment">/// A sample C extension.
</span><span class="comment">// Demonstrates using ldoc's C/C++ support. Can either use /// or /*** */ etc.
</span><span class="comment">// @module mylib
</span>#include &lt;string.h&gt;
#include &lt;math.h&gt;

<span class="comment">// includes for Lua
</span>#include &lt;lua.h&gt;
#include &lt;lauxlib.h&gt;
#include &lt;lualib.h&gt;

<span class="comment">/***
Create a table with given array and hash slots.
@function createtable
@param narr initial array slots, default 0
@param nrec initial hash slots, default 0
*/</span>
<span class="keyword">static</span> <span class="keyword">int</span> <span class="function-name">l_createtable</span> (lua_State *L) {
  <span class="keyword">int</span> narr = <span class="function-name">luaL_optint</span>(L,<span class="number">1</span>,<span class="number">0</span>);
  <span class="keyword">int</span> nrec = <span class="function-name">luaL_optint</span>(L,<span class="number">2</span>,<span class="number">0</span>);
  <span class="function-name">lua_createtable</span>(L,narr,nrec);
  <span class="keyword">return</span> <span class="number">1</span>;
}

<span class="comment">/***
Solve a quadratic equation.
@function solve
@tparam num a coefficient of x^2
@tparam num b coefficient of x
@tparam num c constant
@treturn num first root
@treturn num second root
*/</span>
<span class="keyword">static</span> <span class="keyword">int</span> <span class="function-name">l_solve</span> (lua_State *L) {
    <span class="keyword">double</span> a = <span class="function-name">lua_tonumber</span>(L,<span class="number">1</span>);  <span class="comment">// coeff of x*x
</span>    <span class="keyword">double</span> b = <span class="function-name">lua_tonumber</span>(L,<span class="number">2</span>);  <span class="comment">// coef of x
</span>    <span class="keyword">double</span> c = <span class="function-name">lua_tonumber</span>(L,<span class="number">3</span>);  <span class="comment">// constant
</span>    <span class="keyword">double</span> abc = b*b - <span class="number">4</span>*a*c;
    <span class="keyword">if</span> (abc &lt; <span class="number">0.0</span>) {
        <span class="function-name">lua_pushnil</span>(L);
        <span class="function-name">lua_pushstring</span>(L,<span class="string">"imaginary roots!"</span>);
        <span class="keyword">return</span> <span class="number">2</span>;
    } <span class="keyword">else</span> {
        abc = <span class="function-name">sqrt</span>(abc);
        a = <span class="number">2</span>*a;
        <span class="function-name">lua_pushnumber</span>(L,(-b + abc)/a);
        <span class="function-name">lua_pushnumber</span>(L,(+b - abc)/a);
        <span class="keyword">return</span> <span class="number">2</span>;
    }
}

<span class="keyword">static</span> <span class="keyword">const</span> luaL_reg mylib[] = {
    {<span class="string">"createtable"</span>,l_createtable},
    {<span class="string">"solve"</span>,l_solve},
    {NULL,NULL}
};

<span class="keyword">int</span> <span class="function-name">luaopen_mylib</span>(lua_State *L)
{
    <span class="function-name">luaL_register</span> (L, <span class="string">"mylib"</span>, mylib);
    <span class="keyword">return</span> <span class="number">1</span>;
}</pre>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/ldoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2023-05-04 20:11:45 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
