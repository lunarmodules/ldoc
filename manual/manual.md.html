<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>LDoc documentation</title>
    <link rel="stylesheet" href="../ldoc_new.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>LDoc</h1>



<h2>Contents</h2>
<ul>
<li><a href="#Introduction">Introduction </a></li>
<li><a href="#Commenting_Conventions">Commenting Conventions </a></li>
<li><a href="#Sections">Sections </a></li>
<li><a href="#Which_files_are_processed_">Which files are processed? </a></li>
<li><a href="#See_References">See References </a></li>
<li><a href="#Module_Tags">Module Tags </a></li>
<li><a href="#Adding_new_Tags">Adding new Tags </a></li>
<li><a href="#Inferring_more_from_Code">Inferring more from Code </a></li>
<li><a href="#Extension_modules_written_in_C">Extension modules written in C </a></li>
<li><a href="#Moonscript_Support">Moonscript Support </a></li>
<li><a href="#Basic_Usage">Basic Usage </a></li>
<li><a href="#Markdown_Support">Markdown Support </a></li>
<li><a href="#Processing_Single_Modules">Processing Single Modules </a></li>
<li><a href="#Getting_Help_about_a_Module">Getting Help about a Module </a></li>
<li><a href="#Anatomy_of_a_LDoc_generated_Page">Anatomy of a LDoc-generated Page </a></li>
<li><a href="#Customizing_the_Page">Customizing the Page </a></li>
<li><a href="#Examples">Examples </a></li>
<li><a href="#Readme_files">Readme files </a></li>
<li><a href="#Tag_Modifiers">Tag Modifiers </a></li>
<li><a href="#Fields_allowed_in__config_ld_">Fields allowed in `config.ld` </a></li>
<li><a href="#Importing_Lua_Objects">Importing Lua Objects </a></li>
<li><a href="#Annotations_and_Searching_for_Tags">Annotations and Searching for Tags </a></li>
<li><a href="#Generating_HTML">Generating HTML </a></li>
<li><a href="#Internal_Data_Representation">Internal Data Representation </a></li>
</ul>


<h2>Manual</h2>
<ul class="nowrap">
  <li><strong>manual</strong></li>
</ul>
<h2>Programs</h2>
<ul class="nowrap">
  <li><a href="../index.html">ldoc</a></li>
</ul>
<h2>Examples</h2>
<ul class="nowrap">
  <li><a href="../examples/colon.lua.html">colon.lua</a></li>
  <li><a href="../examples/four.lua.html">four.lua</a></li>
  <li><a href="../examples/three.lua.html">three.lua</a></li>
  <li><a href="../examples/multiple.lua.html">multiple.lua</a></li>
  <li><a href="../examples/mylib.c.html">mylib.c</a></li>
  <li><a href="../examples/List.moon.html">List.moon</a></li>
</ul>

</div>

<div id="content">


<h1>LDoc, a Lua Documentation Tool</h1>


<p><a name="Introduction"></a></p>
<h2>Introduction</h2>

<p>LDoc is a software documentation tool which automatically generates API documentation out of source code comments (doc comments).
It is mainly targeted at Lua and documenting Lua APIs, but it can also parse C with according doc comments for documenting Lua modules implemented in C.</p>

<p>It is mostly compatible with <a href="https://keplerproject.github.io/luadoc/">LuaDoc</a>, except that certain workarounds are no longer needed.
For instance, it is not so married to the idea that Lua modules should be defined using the <code>module</code> function; this is not only a matter of taste since this has been deprecated in Lua 5.2.</p>

<p>Otherwise, the output is very similar, which is no accident since the HTML templates are based directly on LuaDoc.
You can ship your own customized templates and style sheets with your <a href="https://nilnor.github.io/textui/docs/">own project</a> (also see Graham Hannington's documentation for <a href="https://web.archive.org/web/20191231114636/http://lua4z.com/doc/">Lua for z/OS</a>).
LDoc comes with three extra themes; 'pale' for those who like whitespace, 'one' for one-column output, and 'fixed' for a fixed navigation bar down the left side.</p>

<p>You have an option to use Markdown to process the documentation, which means no ugly HTML is needed in doc comments.
C/C++ extension modules may be documented in a similar way, although function names cannot be inferred from the code itself.</p>

<p>LDoc can provide integrated documentation, with traditional function comments, any documents in Markdown format, and specified source examples.
Lua source in examples and the documents will be prettified.</p>

<p>Although there are a fair number of command-line options, the preferred route is to write a <code>config.ld</code> configuration file in Lua format.
By convention, if LDoc is simply invoked as <code>ldoc .</code> it will read this file first.
In this way, the aim is to make it very easy for end-users to build your documentation using this simple command.</p>

<p><a name="Commenting_Conventions"></a></p>
<h2>Commenting Conventions</h2>

<p>LDoc follows the conventions established by Javadoc and later by LuaDoc to document the modules, functions, tables and types ("classes") of your API.</p>

<h3>Doc comments</h3>

<p>Only 'doc comments' are parsed; these can be started with at least 3 hyphens, or by a empty comment line with at least 3 hyphens:</p>


<pre>
<span class="comment">--- summary.
</span><span class="comment">-- Description; this can extend over
</span><span class="comment">-- several lines
</span>
<span class="comment">-----------------
</span><span class="comment">-- This will also do.</span>
</pre>


<p>You can also use Lua block comments:</p>


<pre>
<span class="comment">--[[--
    Summary. A description
    ...;
]]</span>
</pre>


<p>Any module or script must start with a doc comment; any other files are ignored and a warning issued.
The only exception is if the module starts with an explicit <code>module</code> statement.</p>

<p>If your coding standards require a boilerplate copyright notice, then the <code>-B</code> flag or <code>boilerplate=true</code> will make LDoc ignore the first comment of each module.</p>

<p>Common commenting patterns like '---- (text) -----' are exempted, since they are often used for programmer-facing documentation.</p>

<h3>Tags</h3>

<p>All doc comments start with a summary sentence, that ends with a period or a question mark.
An optional description may follow. Normally the summary sentence will appear in the module contents.</p>

<p>After this descriptive text, there will typically be <em>tags</em> which are introduced with an @.
These follow the convention established by Javadoc and widely used in tools for other languages.</p>


<pre>
<span class="comment">--- Some doc comment
</span><span class="comment">-- @tag1 parameters for first tag
</span><span class="comment">-- @tag2 parameters for the second tag</span>
</pre>


<p>The order of tags is not important, but as always, consistency is useful.</p>

<p>Here are all the tags known to LDoc:</p>

<ul>
    <li><strong>@module</strong>  A Lua module containing functions and tables, which may be inside sections</li>
    <li><strong>@classmod</strong> Like <strong>@module</strong> but describing a class</li>
    <li><strong>@submodule</strong> A file containing definitions that you wish to put into the named <em>master</em> module</li>
    <li><strong>@script</strong>  A Lua program</li>
    <li><strong>@author</strong> (multiple), <strong>@copyright</strong>, <strong>@license</strong>, <strong>@release</strong> only used for <em>project-level</em> tags like <strong>@module</strong></li>
    <li><strong>@function</strong>, <strong>@lfunction</strong>. Functions inside a module</li>
    <li><strong>@param</strong>  formal arguments of a function (multiple)</li>
    <li><strong>@return</strong> returned values of a function (multiple)</li>
    <li><strong>@raise</strong> unhandled error thrown by this function</li>
    <li><strong>@local</strong> explicitly marks a function as not being exported (unless <code>--all</code>)</li>
    <li><strong>@see</strong> reference other documented items</li>
    <li><strong>@usage</strong> give an example of a function's use. (Has a somewhat different meaning when used with <strong>@module</strong>)</li>
    <li><strong>@table</strong> a Lua table</li>
    <li><strong>@field</strong> a named member of a table</li>
    <li><strong>@section</strong> starting a named section for grouping functions or tables together</li>
    <li><strong>@type</strong> a section which describes a class</li>
    <li><strong>@within</strong> puts the function or table into an implicit section</li>
    <li><strong>@fixme</strong>, <strong>@todo</strong> and <strong>@warning</strong> are <em>annotations</em>, which are doc comments that
    occur inside a function body.</li>
</ul>

<p>The first important tag to know is the module tag:</p>

<h4>Modules: naming and describing your API module</h4>

<p>The first thing in your API module should be a name and a description.
This is how a module is commonly done in Lua 5.2 with a <strong>@module</strong> tag at the top which introduces the name:</p>


<pre>
<span class="comment">--- a test module
</span><span class="comment">-- @module test
</span>
<span class="keyword">local</span> test = {}

<span class="keyword">function</span> test.<span class="function-name">my_module_function_1</span>()
    ...
<span class="keyword">end</span>

...

<span class="keyword">return</span> test
</pre>


<p>This sets up a module named 'test' with the description 'a test module'.</p>

<h4>Functions</h4>

<p>The next thing to describe are the functions your module has.
This is a simple example of a documented function:</p>


<pre>
<span class="comment">--- foo explodes text.
</span><span class="comment">-- It is a specialized splitting operation on a string.
</span><span class="comment">-- @param text the string
</span><span class="comment">-- @return a table of substrings
</span><span class="keyword">function</span> <span class="function-name">foo</span> (text)
    ...
<span class="keyword">end</span>
</pre>


<p>You can also give the function name itself as an explicit tag, which is especially useful when documenting a Lua api exported by C code:</p>


<pre>
<span class="comment">/// A C function which is exported to Lua with another name,
</span><span class="comment">// because the ways of C can be mysterious!
</span><span class="comment">// @function our_nice_function
</span><span class="keyword">int</span> <span class="function-name">_some_function_for_lua</span>(lua_State* l) {
    ....
}
</pre>


<p>The tags basically add all the detail that cannot be derived from the source code automatically.</p>

<h4>Function parameters and return values</h4>

<p>Common tags are the 'param' tag which takes a parameter name followed by a parameter description separated by a space, and the 'return' tag which is simply followed by a description for a return value:</p>


<pre>
<span class="comment">-- @param name_of_parameter the description of this parameter as verbose text
</span><span class="comment">-- @return the description of the return value</span>
</pre>


<p>If you want to <a href="#Tag_Modifiers">specify a type</a> for a parameter or a return value, there are also 'tparam' and 'treturn':</p>


<pre>
<span class="comment">-- @tparam string text this parameter is named 'text' and has the fixed type 'string'
</span><span class="comment">-- @treturn {string,...} a table of substrings</span>
</pre>


<p>There may be multiple 'param' tags, which should document each formal parameter of the function.
For Lua, there can also be multiple 'return' tags:</p>


<pre>
<span class="comment">--- solve a quadratic equation.
</span><span class="comment">-- @param a first coeff
</span><span class="comment">-- @param b second coeff
</span><span class="comment">-- @param c third coeff
</span><span class="comment">-- @return first root, or nil
</span><span class="comment">-- @return second root, or imaginary root error
</span><span class="keyword">function</span> <span class="function-name">solve</span> (a,b,c)
    <span class="keyword">local</span> disc = b^<span class="number">2</span> - <span class="number">4</span>*a*c
    <span class="keyword">if</span> disc &lt; <span class="number">0</span> <span class="keyword">then</span>
        <span class="keyword">return</span> <span class="keyword">nil</span>,<span class="string">"imaginary roots"</span>
    <span class="keyword">else</span>
        disc = <span class="global">math</span>.<span class="function-name">sqrt</span>(disc)
        <span class="keyword">return</span> (-b + disc)/<span class="number">2</span>*a,
                (-b - disc)/<span class="number">2</span>*a
    <span class="keyword">end</span>
<span class="keyword">end</span>

...
</pre>


<h4>Tables and constant values (fields)</h4>

<p>Modules can of course export tables and other values. The classic way to document a table looks like this:</p>


<pre>
<span class="comment">--- a useful table of constants
</span><span class="comment">-- @field alpha first correction
</span><span class="comment">-- @field beta second correction
</span><span class="comment">-- @field gamma fudge factor
</span><span class="comment">-- @table constants</span>
</pre>


<p>Here the kind of item is made explicit by the 'table' tag; tables have 'fields' in the same way as functions have parameters.</p>

<p>This can get tedious, so LDoc will attempt to extract table documentation from code:</p>


<pre>
<span class="comment">--- a useful table of constants
</span>M.constants = {
    alpha = <span class="number">0.23</span>, <span class="comment">-- first correction
</span>    beta = <span class="number">0.443</span>, <span class="comment">-- second correction
</span>    gamma = <span class="number">0.01</span>  <span class="comment">-- fudge factor
</span>}
</pre>


<p>The rule followed here is <code>NAME = &lt;table-constructor&gt;</code>.
If LDoc can't work out the name and type from the following code, then a warning will be issued, pointing to the file and location.
Only single-level tables are currently supported, and the fields must be valid identifiers.</p>

<p>Another kind of module-level type is 'field', such as follows:</p>


<pre>
<span class="comment">--- module version.
</span>M._VERSION = <span class="string">'0.5'</span>
</pre>


<p>That is, a module may contain exported functions, local functions, tables and fields.</p>

<h4>Explicitly specifying a function or fields</h4>

<p>When the code analysis would lead to the wrong type, you can always be explicit.</p>


<pre>
<span class="comment">--- module contents with explicitly documented field _CONTENTS.
</span>
M._CONTENTS = {constants=<span class="keyword">true</span>,one=<span class="keyword">true</span>,...}

<span class="comment">--- an explicitly named function.
</span><span class="comment">-- @function my_function
</span><span class="keyword">function</span> <span class="function-name">my_function</span>()
    ...
<span class="keyword">end</span>
</pre>


<p>This is especially useful in C where the function declarations are different from final Lua api which you are documenting.</p>

<h3>Doing modules the Lua 5.1 way</h3>

<p>As an alternative to using the 'module' tag as described previously, you can still start your modules the Lua 5.1 way:</p>


<pre>
<span class="comment">--- solvers for common equations.
</span><span class="global">module</span>(<span class="string">"solvers"</span>, <span class="global">package</span>.seeall)
</pre>


<p>However, the 'module' function is deprecated in Lua 5.2 and it is increasingly common to see less 'magic' ways of creating modules, as seen in the description of the 'module' tag previously with the explicitly returned module table.</p>

<h4>Repeating tags</h4>

<p>Tags like 'param' and 'return' can be specified multiple times, whereas a type tag like 'function' can only occur once in a comment.</p>

<p>The basic rule is that a single doc comment can only document one entity.</p>

<h3>Local module name</h3>

<p>It is common to use a local name for a module when declaring its contents.
In this case the 'alias' tag can tell LDoc that these functions do belong to the module:</p>


<pre>
<span class="comment">--- another test.
</span><span class="comment">-- @module test2
</span><span class="comment">-- @alias M
</span>
<span class="keyword">local</span> M = {}

<span class="comment">-- first test.
</span><span class="keyword">function</span> M.<span class="function-name">one</span>()
..
<span class="keyword">end</span>

<span class="keyword">return</span> M
</pre>


<p><code>M</code> and <code>_M</code> are used commonly enough that LDoc will recognize them as aliases automatically, but 'alias' allows you to use any identifier.</p>

<p>LDoc tries to deduce the function name and the formal parameter names from examining the code after the doc comment.
It also recognizes the 'unsugared' way of defining functions as explicit assignment to a variable:</p>


<pre>
<span class="comment">--- second test.
</span>M.two = <span class="keyword">function</span>(...) ... <span class="keyword">end</span>
</pre>


<h3>Local functions</h3>

<p>Apart from exported functions, a module usually contains local functions.
By default, LDoc does not include these in the documentation, but they can be enabled using the <code>--all</code> flag, or <code>all=true</code> in <code>config.ld</code>.
They can be documented just like 'public' functions:</p>


<pre>
<span class="comment">--- it's clear that boo is local from context.
</span><span class="keyword">local</span> <span class="keyword">function</span> <span class="function-name">boo</span>(...) .. <span class="keyword">end</span>

<span class="keyword">local</span> foo

<span class="comment">--- we need to give a hint here for foo
</span><span class="comment">-- @local here
</span><span class="keyword">function</span> <span class="function-name">foo</span>(...) .. <span class="keyword">end</span>
</pre>


<h3>Alternative way of specifying tags</h3>

<p>Since 1.3, LDoc allows the use of <em>colons</em> instead of @.</p>


<pre>
<span class="comment">--- a simple function.
</span><span class="comment">-- string: name person's name
</span><span class="comment">-- int: age age of person
</span><span class="comment">-- !person: person object
</span><span class="comment">-- treturn: ?string
</span><span class="comment">-- function check(name,age)</span>
</pre>


<p>However, you must either use the <code>--colon</code> flag or set <code>colon=true</code> in your <code>config.ld</code>.</p>

<p>In this style, types may be used directly if prefixed with '!' or '?' (for type-or-nil).</p>

<p>(see <a href="../examples/colon.lua.html#">colon.lua</a>)</p>


<p><a name="Sections"></a></p>
<h2>Sections</h2>

<p>LDoc supports <em>explicit</em> sections.
By default, the implicit sections correspond to the pre-existing types in a module: 'Functions', 'Tables' and 'Fields'.
(There is another default section 'Local Functions' which only appears if LDoc is invoked with the <code>--all</code> flag.)
But new sections can be added; the first mechanism is when you <a href="../manual/manual.md.html#Adding_new_Tags">define a new type</a> (say 'macro').
Then a new section ('Macros') is created to contain these types.</p>

<p>There is also a way to declare ad-hoc sections using the <strong>@section</strong> tag.
The need occurs when a module has a lot of functions that need to be put into logical sections.</p>


<pre>
<span class="comment">--- File functions.
</span><span class="comment">-- Useful utilities for opening foobar format files.
</span><span class="comment">-- @section file
</span>
<span class="comment">--- open a file
</span>...

<span class="comment">--- read a file
</span>...

<span class="comment">--- Encoding operations.
</span><span class="comment">-- Encoding foobar output in different ways.
</span><span class="comment">-- @section encoding
</span>
...
</pre>


<p>A section doc-comment has the same structure as a normal doc-comment.
The summary is used as the new section title, and the description will be output at the start of the function details for that section.
The name is not used, but must be unique.</p>

<p>Sections appear under 'Contents' on the left-hand side.
See the <a href="https://stevedonovan.github.io/winapi/api.html">winapi</a> documentation for an example of how this looks.</p>

<p>Arguably a module writer should not write such very long modules, but it is not the job of the documentation tool to limit the programmer!</p>

<p>A specialized kind of section is <code>type</code>: it is used for documenting classes.
The functions (or fields) within a type section are considered to be the methods of that class.</p>


<pre>
<span class="comment">--- A File class.
</span><span class="comment">-- @type File
</span>
....
<span class="comment">--- get the modification time.
</span><span class="comment">-- @return standard time since epoch
</span><span class="keyword">function</span> File:<span class="function-name">mtime</span>()
...
<span class="keyword">end</span>
</pre>


<p>(In an ideal world, we would use the word 'class' instead of 'type', but this would conflict with the LuaDoc <code>class</code> tag.)</p>

<p>A section continues until the next section is found, <code>@section end</code>, or end of file.</p>

<p>You can put items into <em>implicit sections</em> using <strong>@within</strong>.
This allows you to put adjacent functions in different sections, so that you are not forced to order your code in a particular way.</p>

<p>With 1.4, there is another option for documenting classes, which is the top-level type <code>classmod</code>.
It is intended for larger classes which are implemented within one module, and the advantage that methods can be put into sections.</p>

<p>Sometimes a module may logically span several files, which can easily happen with large modules.
There will be a master module with name 'foo' and other files which when required add functions to that module.
If these files have a <strong>@submodule</strong> tag, their contents will be placed in the master module documentation.
However, a current limitation is that the master module must be processed before the submodules.</p>

<p>See the <code>tests/submodule</code> example for how this works in practice.</p>

<p><a name="Which_files_are_processed_"></a></p>
<h2>Which files are processed?</h2>

<p>By default, LDoc will process any file ending in '.lua' or '.luadoc' in a specified directory; you may point it to a single file as well.
A 'project' usually consists of many modules in one or more <em>packages</em>.
The generated <code>index.html</code> will point to the generated documentation for each of these modules.</p>

<p>If only one module or script is documented for a project, then the <code>index.html</code> generated contains the documentation for that module, since an index pointing to one module would be redundant.</p>

<p>LDoc has a two-layer hierarchy; underneath the project, there are modules, scripts, classes (containing code) and examples and 'topics' (containing documentation).
These then contain items like functions, tables, sections, and so forth.</p>

<p>If you want to document scripts, then use <strong>@script</strong> instead of <strong>@module</strong>.
New with 1.4 is <strong>@classmod</strong> which is a module which exports a single class.</p>

<p><a name="See_References"></a></p>
<h2>See References</h2>

<p><strong>@see</strong> is used to reference other parts of the documentation, and <strong>@usage</strong> can provide examples of use; there can be multiple such tags:</p>


<pre>
<span class="comment">---------
</span><span class="comment">-- split a string in two.
</span><span class="comment">-- @param s the string
</span><span class="comment">-- @param delim the delimiter (default space)
</span><span class="comment">-- @return first part
</span><span class="comment">-- @return second part
</span><span class="comment">-- @usage local hello,world = split2("hello world")
</span><span class="comment">-- @see split
</span><span class="keyword">function</span> <span class="function-name">split2</span>(s,delim) ... <span class="keyword">end</span>
</pre>


<p>Here it's assumed that 'split' is a function defined in the same module.
If you wish to link to a function in another module, then the reference has to be qualified.</p>

<p>References to methods use a colon: <code>myclass:method</code>; this is for instance how you would refer to members of a <strong>@type</strong> section.</p>

<p>The example at <code>tests/complex</code> shows how <strong>@see</strong> references are interpreted:</p>


<pre>
complex.util.parse
complex.convert.basic
complex.util
complex.display
complex
</pre>

<p>You may of course use the full name of a module or function, but can omit the top-level namespace - e.g. can refer to the module <code>util</code> and the function <code>display.display_that</code> directly.
Within a module, you can directly use a function name, e.g. in <code>display</code> you can say <code>display_this</code>.</p>

<p>What applies to functions also applies to any module-level item like tables.
New module-level items can be defined and they will work according to these rules.</p>

<p>If a reference is not found within the project, LDoc checks to see if it is a reference to a Lua standard function or table, and links to the online Lua manual.
So references like 'table.concat' are handled sensibly.</p>

<p>References may be made inline using the <code>@{ref}</code> syntax.
This may appear anywhere in the text, and is more flexible than <strong>@see</strong>.
In particular, it provides one way to document the type of a parameter or return value when that type has a particular structure:</p>


<pre>
<span class="comment">------
</span><span class="comment">-- extract standard variables.
</span><span class="comment">-- @param s the string
</span><span class="comment">-- @return @{stdvars}
</span><span class="keyword">function</span> <span class="function-name">extract_std</span>(s) ... <span class="keyword">end</span>

<span class="comment">------
</span><span class="comment">-- standard variables.
</span><span class="comment">-- Use @{extract_std} to parse a string containing variables,
</span><span class="comment">-- and @{pack_std} to make such a string.
</span><span class="comment">-- @field length
</span><span class="comment">-- @field duration
</span><span class="comment">-- @field viscosity
</span><span class="comment">-- @table stdvars</span>
</pre>


<p><code>@{ref}</code> is very useful for referencing your API from code samples and readme text.</p>

<p>The link text can be changed from the default by the extended syntax <code>@{ref|text}</code>.</p>

<p>You can also put references in backticks, like <code>\`stdvars\`</code>.
This is commonly used in Markdown to indicate code, so it comes naturally when writing documents.
The difference is that the backticked expression does not have to be a reference and then will appear in code style; with @ references you will get a warning for unrecognized symbols and the result will be rendered as '???'.</p>

<p>It is controlled by the configuration variable <code>backtick_references</code> or the <code>backtick</code> format; the default is <code>true</code> if you use Markdown in your project, but can be specified explicitly in <code>config.ld</code>.</p>

<p>To quote such references so they won't be expanded, say @{\ref}.</p>

<h4>Custom @see References</h4>

<p>It's useful to define how to handle references external to a project.
For instance, in the <a href="https://github.com/luaposix/luaposix">luaposix</a> project we wanted to have <code>man</code> references to the corresponding C function:</p>


<pre>
<span class="comment">------------
</span><span class="comment">-- raise a signal on this process.
</span><span class="comment">-- @see raise(3)
</span><span class="comment">-- @int nsig
</span><span class="comment">-- @return integer error cod
</span><span class="keyword">function</span> <span class="function-name">raise</span> (nsig)
<span class="keyword">end</span>
</pre>


<p>These see references always have this particular form, and the task is to turn them into online references to the Linux manpages.
So in <code>config.ld</code> we have:</p>


<pre>
<span class="keyword">local</span> upat = <span class="string">"http://www.kernel.org/doc/man-pages/online/pages/man%s/%s.%s.html"</span>

<span class="function-name">custom_see_handler</span>(<span class="string">'^([%w_]+)%((%d)%)$'</span>,<span class="keyword">function</span>(name,section)
    <span class="keyword">local</span> url = upat:<span class="function-name">format</span>(section,name,section)
    <span class="keyword">local</span> name = name .. <span class="string">'('</span> ..section..<span class="string">')'</span>
    <span class="keyword">return</span> name, url
<span class="keyword">end</span>)
</pre>


<p><code>^([%w_]+)%((%d)%)$</code> both matches the pattern and extracts the name and its section.
Then it's a simple matter of building up the appropriate URL.
The function is expected to return <em>link text</em> and <em>link source</em> and the patterns are checked before LDoc tries to resolve project references.
So it is best to make them match as exactly as possible.</p>

<p><a name="Module_Tags"></a></p>
<h2>Module Tags</h2>

<p>LDoc requires you to have a module doc comment.
If your code style requires license blocks that might look like doc comments, then set <code>boilerplate=true</code> in your configuration and they will be skipped.</p>

<p>This comment does not have to have an explicit <strong>@module</strong> tag and LDoc continues to respect the use of <code>module()</code>.</p>

<p>There are three types of 'modules' (i.e. 'project-level'); <code>module</code>, a library loadable with <code>require()</code>, <code>script</code>, a program, and <code>classmod</code> which is a class implemented in a single module.</p>

<p>There are some tags which are only useful in module comments: <code>author</code>,<code>copyright</code>, <code>license</code> and <code>release</code>.
These are presented in a special <strong>Info</strong> section in the default HTML output.</p>

<p>The <strong>@usage</strong> tag has a somewhat different presentation when used in modules; the text is presented formatted as-is in a code font.
If you look at the script <code>ldoc</code> in this documentation, you can see how the command-line usage is shown.
Since coding is all about avoiding repetition and the out-of-sync issues that arise, the <strong>@usage</strong> tag can appear later in the module, before a long string.
For instance, the main script of LDoc is <a href="https://github.com/lunarmodules/ldoc/blob/master/ldoc.lua">ldoc.lua</a> and you will see that the usage tag appears on line 36 before the usage string
presented as help.</p>

<p><strong>@export</strong> is another module tag that is usually 'detached'.
It is for supporting modules that wish to explicitly export their functions <a href="../examples/three.lua.html#">at the end</a>.
In that example, both <code>question</code> and <code>answer</code> are local and therefore private to the module, but <code>answer</code> has been explicitly exported.
(If you invoke LDoc with the <code>-a</code> flag on this file, you will see the documentation for the unexported function as well.)</p>

<p><strong>@set</strong> is a powerful tag which assigns a configuration variable to a value <em>just for this module</em>.
Saying <code>@set no_summary=true</code> in a module comment will temporarily disable summary generation when the template is expanded.
Generally configuration variables that effect template expansion are modifiable in this way.
For instance, if you wish that the contents of a particular module be sorted, then <code>@set sort=true</code> will do it <em>just</em> for that module.</p>

<p><a name="Adding_new_Tags"></a></p>
<h2>Adding new Tags</h2>

<p>LDoc tries to be faithful to LuaDoc, but provides some extensions.
Aliases for tags can be defined, and new types declared.</p>


<pre>
<span class="comment">--- zero function. Two new ldoc features here; item types
</span><span class="comment">-- can be used directly as tags, and aliases for tags
</span><span class="comment">-- can be defined in config.ld.
</span><span class="comment">-- @function zero_fun
</span><span class="comment">-- @p k1 first
</span><span class="comment">-- @p k2 second</span>
</pre>


<p>Here an alias for 'param' has been defined.
If a file <code>config.ld</code> is found in the source, then it will be loaded as Lua data.
For example, the configuration for the above module provides a title and defines an alias for 'param':</p>


<pre>
title = <span class="string">"testmod docs"</span>
project = <span class="string">"testmod"</span>
<span class="function-name">alias</span>(<span class="string">"p"</span>,<span class="string">"param"</span>)
</pre>


<p>Extra tag <em>types</em> can be defined:</p>


<pre>
<span class="function-name">new_type</span>(<span class="string">"macro"</span>,<span class="string">"Macros"</span>)
</pre>


<p>And then used as any other type:</p>


<pre>
<span class="comment">-----
</span><span class="comment">-- A useful macro. This is an example of a custom type.
</span><span class="comment">-- @macro first_macro
</span><span class="comment">-- @see second_function</span>
</pre>


<p>This will also create a new module section called 'Macros'.</p>

<p>If your new type has arguments or fields, then specify the name:</p>


<pre>
<span class="function-name">new_type</span>(<span class="string">"macro"</span>,<span class="string">"Macros"</span>,<span class="keyword">false</span>,<span class="string">"param"</span>)
</pre>


<p>(The third argument means that this is not a <em>project level</em> tag.)</p>

<p>Then you may say:</p>


<pre>
<span class="comment">-----
</span><span class="comment">-- A macro with arguments.
</span><span class="comment">-- @macro second_macro
</span><span class="comment">-- @param x the argument</span>
</pre>


<p>And the arguments will be displayed under the subsection 'param'.</p>

<p><a name="Inferring_more_from_Code"></a></p>
<h2>Inferring more from Code</h2>

<p>The qualified name of a function will be inferred from any <code>function</code> keyword following the doc comment.
LDoc goes further with this kind of code analysis, however.</p>

<p>Instead of:</p>


<pre>
<span class="comment">--- first table.
</span><span class="comment">-- @table one
</span><span class="comment">-- @field A alpha
</span><span class="comment">-- @field B beta
</span>M.one = {
    A = <span class="number">1</span>,
    B = <span class="number">2</span>;
}
</pre>


<p>you can write:</p>


<pre>
<span class="comment">--- first table
</span><span class="comment">-- @table one
</span>M.one = {
    A = <span class="number">1</span>, <span class="comment">-- alpha
</span>    B = <span class="number">2</span>; <span class="comment">-- beta
</span>}
</pre>


<p>Similarly, function parameter comments can be directly used:</p>


<pre>
<span class="comment">------------
</span><span class="comment">-- third function. Can also provide parameter comments inline,
</span><span class="comment">-- provided they follow this pattern.
</span><span class="keyword">function</span> mod1.<span class="function-name">third_function</span>(
    alpha, <span class="comment">-- correction A
</span>    beta, <span class="comment">-- correction B
</span>    gamma <span class="comment">-- factor C
</span>    )
    ...
<span class="keyword">end</span>
</pre>


<p>As always, explicit tags can override this behaviour if it is inappropriate.</p>

<p><a name="Extension_modules_written_in_C"></a></p>
<h2>Extension modules written in C</h2>

<p>LDoc can process C/C++ files:</p>


<pre>
<span class="comment">/***
Create a table with given array and hash slots.
@function createtable
@param narr initial array slots, default 0
@param nrec initial hash slots, default 0
@return the new table
*/</span>
<span class="keyword">static</span> <span class="keyword">int</span> <span class="function-name">l_createtable</span> (lua_State *L) {
....
</pre>


<p>Both <code>/**</code> and <code>///</code> are recognized as starting a comment block.
Otherwise, the tags are processed in exactly the same way.
It is necessary to specify that this is a function with a given name, since this cannot be reliably be inferred from code.
Such a file will need a module comment, which is treated exactly as in Lua.</p>

<p>An unknown extension can be associated with a language using a call like <code>add_language_extension('lc','c')</code> in <code>config.ld</code>.
(Currently the language can only be 'c' or 'lua'.)</p>

<p>An LDoc feature which is particularly useful for C extensions is <em>module merging</em>.
If several files are all marked as <code>@module lib</code> then a single module <code>lib</code> is generated, containing all the docs from the separate files.
For this, use <code>merge=true</code>.</p>

<p>See <a href="../examples/mylib.c.html#">mylib.c</a> for the full example.</p>

<p><a name="Moonscript_Support"></a></p>
<h2>Moonscript Support</h2>

<p>1.4 introduces basic support for <a href="https://moonscript.org">Moonscript</a>.
Moonscript module conventions are just the same as Lua, except for an explicit class construct.
<a href="../examples/List.moon.html#">List.moon</a> shows how <strong>@classmod</strong> can declare modules that export one class, with metamethods and methods put implicitly into a separate section.</p>

<p><a name="Basic_Usage"></a></p>
<h2>Basic Usage</h2>

<p>For example, to process all files in the 'lua' directory:</p>


<pre>
$ ldoc lua
output written to doc/
</pre>


<p>Thereafter the <code>doc</code> directory will contain <code>index.html</code> which points to individual modules in the <code>modules</code> subdirectory.
The <code>--dir</code> flag can specify where the output is generated, and will ensure that the directory exists.
The output structure is like LuaDoc: there is an <code>index.html</code> and the individual modules are in the <code>modules</code> subdirectory.
This applies to all project-level types, so that you can also get <code>scripts</code>, <code>examples</code> and <code>topics</code> directories.</p>

<p>If your modules use <code>module(...)</code> then the module name has to be deduced.
If <code>ldoc</code> is run from the root of the package, then this deduction does not need any help - e.g. if your package was <code>foo</code> then <code>ldoc foo</code> will work as expected.
If we were actually in the <code>foo</code> directory then <code>ldoc -b .. .</code> will correctly deduce the module names.
An example would be generating documentation for LuaDoc itself:</p>


<pre>
$ ldoc -b .. /path/to/luadoc
</pre>


<p>Without the <code>-b</code> setting the base of the package to  the <em>parent</em> of the directory, implicit modules like <code>luadoc.config</code> will be incorrectly placed in the global namespace.</p>

<p>For new-style modules, that don't use <code>module()</code>, it is recommended that the module comment has an explicit <code>@module PACKAGE.NAME</code>.
If it does not, then <code>ldoc</code> will still attempt to deduce the module name, but may need help with <code>--package/-b</code> as above.</p>

<p>A special case is if you simply say <code>ldoc .</code>.
Then there <em>must</em> be a <code>config.ld</code> file available in the directory, and it can specify the file:</p>


<pre>
file = <span class="string">"mymod.lua"</span>
title = <span class="string">"mymod documentation"</span>
description = <span class="string">"mymod does some simple but useful things"</span>
</pre>


<p><code>file</code> can of course point to a directory, just as with the <code>--file</code> option.
This mode makes it particularly easy for the user to build the documentation, by allowing you to specify everything explicitly in the configuration.</p>

<p>In <code>config.ld</code>, <code>file</code> may be a Lua table, containing file names or directories; if it has an <code>exclude</code> field then that will be used to exclude files from the list, for example <code>{'examples', exclude = {'examples/slow.lua'}}</code>.</p>

<p>A particular configuration file can be specified with the <code>-c</code> flag.
Configuration files don't <em>have</em> to contain a <code>file</code> field, but in that case LDoc does need an explicit file on the command line.
This is useful if you have some defaults you wish to apply to all of your docs.</p>

<p><a name="Markdown_Support"></a></p>
<h2>Markdown Support</h2>

<p><code>format = 'markdown'</code> can be used in your <code>config.ld</code> and will be used to process summaries and descriptions; you can also use the <code>-f</code> flag.
This requires a markdown processor.
LDoc knows how to use:</p>

<ul>
    <li><a href="https://www.frykholm.se/files/markdown.lua">markdown.lua</a> a pure Lua processor by Niklas Frykholm.

<pre>
For convenience, LDoc comes with a copy of markdown.lua.
</pre>
</li>
    <li><a href="http://asbradbury.org/projects/lua-discount/">lua-discount</a>, a faster alternative (installed with <code>luarocks install lua-discount</code>).

<pre>
lua-discount uses the C [discount](https://www.pell.portland.<span class="keyword">or</span>.us/~orc/Code/discount/) Markdown processor which has more features than the pure Lua version, such as PHP-Extra style tables.
</pre>
</li>
    <li><a href="https://jgm.github.io/lunamark/">lunamark</a>, another pure Lua processor, faster than markdown, and with extra features (<code>luarocks install lunamark</code>).</li>
    <li>commonmark via <a href="https://github.com/jgm/cmark-lua">cmark-lua</a>, a Lua wrapper around the fast <a href="https://github.com/jgm/cmark">libcmark</a> C library (<code>luarocks install cmark</code>)</li>
</ul>

<p>You can request the processor you like with <code>format = 'markdown|discount|lunamark|commonmark|plain|backticks'</code>, and LDoc will attempt to use it.
If it can't find it, it will look for one of the other markdown processors; the original <code>markdown.lua</code> ships with LDoc, although it's slow for larger documents.</p>

<p>Even with the default of 'plain' some minimal processing takes place, in particular empty lines are treated as line breaks.
If the 'backticks' formatter is used, then it's equivalent to using <code>process_backticks=true</code> in <code>config.ld</code> and backticks will be expanded into documentation links like <code>@{ref}</code> and converted into <code>&lt;code&gt;ref&lt;/code&gt;</code> otherwise.</p>

<p>This formatting applies to all of a project, including any readmes and so forth.
You may want Markdown for this 'narrative' documentation, but not for your code comments.
<code>plain=true</code> will switch off formatting for code.</p>

<p><a name="Processing_Single_Modules"></a></p>
<h2>Processing Single Modules</h2>

<p><code>--output</code> can be used to give the output file a different name.
This is useful for the special case when a single module file is specified.
Here an index would be redundant, so the single HTML file generated contains the module documentation.</p>


<pre>
$ ldoc mylib.lua <span class="comment">--&gt; results in doc/index.html
</span>$ ldoc <span class="comment">--output mylib mylib.lua --&gt; results in doc/mylib.html
</span>$ ldoc <span class="comment">--output mylib --dir html mylib.lua --&gt; results in html/mylib.html</span>
</pre>


<p>The default sections used by LDoc are 'Functions', 'Tables' and 'Fields', corresponding to the built-in types 'function', 'table' and 'field'.
If <code>config.ld</code> contains something like <code>new_type("macro","Macros")</code> then this adds a new section 'Macros' which contains items of 'macro' type - 'macro' is registered as a new valid tag name.
The default template then presents items under their corresponding section titles, in order of definition.</p>

<p><a name="Getting_Help_about_a_Module"></a></p>
<h2>Getting Help about a Module</h2>

<p>There is an option to simply dump the results of parsing modules.
Consider the C example `tests/example/mylib.c':</p>


<pre>
$ ldoc <span class="comment">--dump mylib.c
</span><span class="comment">----
</span><span class="global">module</span>: mylib   A sample C extension.
Demonstrates using <span class="function-name">ldoc</span>'s C/C++ support. Can either use /// <span class="keyword">or</span> /*** */ etc.

<span class="keyword">function</span>        <span class="function-name">createtable</span>(narr, nrec)
Create a <span class="global">table</span> with given array <span class="keyword">and</span> hash slots.
narr     initial array slots, default <span class="number">0</span>
nrec     initial hash slots, default <span class="number">0</span>

<span class="keyword">function</span>        <span class="function-name">solve</span>(a, b, c)
Solve a quadratic equation.
a        coefficient of x^<span class="number">2</span>
b        coefficient of x
c        constant
<span class="keyword">return</span>  {<span class="string">"first root"</span>,<span class="string">"second root"</span>}
</pre>


<p>This is useful to quickly check for problems; here we see that <code>createable</code> did not have a return tag.</p>

<p>LDoc takes this idea of data dumping one step further.
If used with the <code>-m</code> flag it will look up an installed Lua module and parse it.
If it has been marked up in LuaDoc-style then you will get a handy summary of the contents:</p>


<pre>
$ ldoc -m pl.pretty
<span class="comment">----
</span><span class="global">module</span>: pl.pretty       Pretty-printing Lua tables.
* <span class="function-name">read</span>(s) - read a <span class="global">string</span> representation of a Lua <span class="global">table</span>.
* <span class="function-name">write</span>(tbl, space, not_clever) - Create a <span class="global">string</span> representation of a Lua <span class="global">table</span>.

* <span class="function-name">dump</span>(t, ...) - Dump a Lua <span class="global">table</span> out to a file <span class="keyword">or</span> stdout.
</pre>


<p>You can specify a fully qualified function to get more information:</p>


<pre>
$ ldoc -m pl.pretty.write

<span class="keyword">function</span>        <span class="function-name">write</span>(tbl, space, not_clever)
create a <span class="global">string</span> representation of a Lua <span class="global">table</span>.
<span class="function-name">tbl</span>      {<span class="global">table</span>} Table to serialize to a <span class="global">string</span>.
<span class="function-name">space</span>    {<span class="global">string</span>} (optional) The indent to use.
                Defaults to two spaces.
<span class="function-name">not_clever</span>       {bool} (optional) Use <span class="keyword">for</span> plain output, e.<span class="function-name">g</span> {[<span class="string">'key'</span>]=<span class="number">1</span>}.
                Defaults to <span class="keyword">false</span>.
</pre>


<p>LDoc knows about the basic Lua libraries, so that it can be used as a handy console reference:</p>


<pre>
$ ldoc -m <span class="global">assert</span>

<span class="keyword">function</span>        <span class="global">assert</span>(v, message)
Issues an <span class="global">error</span> when the value of its argument <span class="backtick">`v`</span> is <span class="keyword">false</span> (i.e.,
    <span class="keyword">nil</span> <span class="keyword">or</span> <span class="keyword">false</span>); otherwise, returns all its arguments.
<span class="backtick">`message`</span> is an <span class="global">error</span>
    message; when absent, it defaults <span class="function-name">to</span> <span class="string">"assertion failed!"</span>
v
message
</pre>


<p>Thanks to Mitchell's <a href="https://orbitalquark.github.io/textadept/">Textadept</a> project, LDoc has a set of <code>.luadoc</code> files for all the standard tables, plus <a href="https://lunarmodules.github.io/luafilesystem/">LuaFileSystem</a> and <a href="http://www.inf.puc-rio.br/~roberto/lpeg/lpeg.html">LPeg</a>.</p>


<pre>
$ ldoc -m lfs.lock

<span class="keyword">function</span>        <span class="function-name">lock</span>(filehandle, mode, start, length)
Locks a file <span class="keyword">or</span> a part of it.
This <span class="keyword">function</span> works on open files; the file
    handle should be specified as the first argument. The <span class="global">string</span> mode could be
    either <span class="function-name">r</span> (<span class="keyword">for</span> a read/shared lock) <span class="keyword">or</span> <span class="function-name">w</span> (<span class="keyword">for</span> a write/exclusive lock). The
    optional arguments start <span class="keyword">and</span> length can be used to specify a starting point
    <span class="keyword">and</span> its length; both should be numbers.
    Returns <span class="keyword">true</span> <span class="keyword">if</span> the operation was successful; <span class="keyword">in</span> case of <span class="global">error</span>, it returns
    <span class="keyword">nil</span> plus an <span class="global">error</span> <span class="global">string</span>.
filehandle
mode
start
length
</pre>


<p><a name="Anatomy_of_a_LDoc_generated_Page"></a></p>
<h2>Anatomy of a LDoc-generated Page</h2>

<p><a href="https://stevedonovan.github.io/winapi/api.html">winapi</a> can be used as a good example of a module that uses extended LDoc features.</p>

<p>The <em>navigation section</em> down the left has several parts:</p>

<ul>
    <li>The project name (<code>project</code> in the config)</li>
    <li>A project description (<code>description</code>)</li>
    <li><strong>Contents</strong> of the current page</li>
    <li><strong>Modules</strong> listing all the modules in this project</li>
</ul>

<p>Note that <code>description</code> will be passed through Markdown, if it has been specified for the project.
This gives you an opportunity to make lists of links, etc; any '##' headers will be formatted like the other top-level items on the navigation bar.</p>

<p><strong>Contents</strong> is automatically generated.
It will contain any explicit sections as well as the usual categories: 'Functions', 'Tables' and 'Fields'.
For a documentation page, the subtitles become the sections shown here.</p>

<p><strong>Modules</strong> will appear for any project providing Lua libraries; there may also be a 'Scripts' section if the project contains Lua scripts.
For example, <a href="https://stevedonovan.github.io/LuaMacro/docs/api.html">LuaMacro</a> has a driver script <code>luam</code> in this section.
The <a href="https://stevedonovan.github.io/LuaMacro/docs/modules/macro.builtin.html">builtin</a> module only defines macros, which are defined as a <em>custom tag type[?]</em>.</p>

<p>The <em>content section</em> on the right shows:</p>

<ul>
    <li>The module summary and description</li>
    <li>The contents summary, per section as above</li>
    <li>The detailed documentation for each item</li>
</ul>

<p>As before, the description can use Markdown.
The summary contains the contents of each section as a table, with links to the details.
This is where the difference between an item's summary and an item's description is important; the first will appear in the contents summary.
The item details show the item name and its summary again, followed by the description.
There are then sections for the following tags: 'param', 'usage', 'return' and 'see' in that order.
(For tables, 'Fields' is used instead of 'Parameters' but internally fields of a table are stored as the 'param' tag.)</p>

<p>By default, the items appear in the order of declaration within their section.
If <code>sort=true</code> then they will be sorted alphabetically.
(This can be set per-module with <a href="../manual/manual.md.html#Module_Tags">@set</a>.)</p>

<p>You can of course customize the default template, but there are some parameters that can control what the template will generate.
Setting <code>one=true</code> in your configuration file will give a <em>one-column</em> layout, which can be easier to use as a programming reference.
You can suppress the contents summary with <code>no_summary</code>.</p>

<p>If you don't like the usual top-level names, like 'Module' and 'Topics', you can override these with <code>kind_names</code> in <code>config.ld</code>.
For instance, in Penlight I use <code>kind_names={topic='Manual',module='Libraries'}</code>.</p>

<p><a name="Customizing_the_Page"></a></p>
<h2>Customizing the Page</h2>

<p>A basic customization is to override the default UTF-8 encoding using <code>charset</code>.
For instance, Brazilian software would find it useful to put <code>charset='ISO-8859-1'</code> in <code>config.ld</code>, or use the <strong>@charset</strong> tag for individual files.</p>

<p>Setting <code>no_return_or_parms</code> to <code>true</code> will suppress the display of 'param' and 'return' tags.
This may appeal to programmers who dislike the traditional @tag soup xDoc style and prefer to comment functions just with a description.
This is particularly useful when using Markdown in a stylized way to specify arguments:</p>


<pre>
<span class="comment">---------
</span><span class="comment">-- This extracts the shortest common substring from the strings _s1_ and _s2_
</span><span class="keyword">function</span> M.<span class="function-name">common_substring</span>(s1,s2)
</pre>


<p>Here I've chosen to italicise parameter names; the main thing is to be consistent.</p>

<p>This style is close to the Python <a href="https://docs.python.org/library/array.html#module-array">documentation standard</a>, especially when used with <code>no_summary</code>.</p>

<p>It is also very much how the Lua documentation is ordered.
For instance, this configuration file formats the built-in documentation for the Lua global functions in a way which is close to the original:</p>


<pre>
project = <span class="string">'Lua'</span>
description = <span class="string">'Lua Standard Libraries'</span>
file = {<span class="string">'ldoc/builtin'</span>,exclude = {<span class="string">'ldoc/builtin/globals.lua'</span>}}
no_summary = <span class="keyword">true</span>
no_return_or_parms = <span class="keyword">true</span>
format = <span class="string">'discount'</span>
</pre>


<p>Generally, using Markdown gives you the opportunity to structure your documentation in any way you want; particularly if using lua-discount and its <a href="https://michelf.com/projects/php-markdown/extra/#table">table syntax</a>; the desired result can often be achieved then by using a custom style sheet.</p>

<p><a name="Examples"></a></p>
<h2>Examples</h2>

<p>It has been long known that documentation generated just from the source is not really adequate to explain <em>how</em> to use a library.
People like reading narrative documentation, and they like looking at examples.
Previously I found myself dealing with source-generated and writer-generated documentation using different tools, and having to match these up.</p>

<p>LDoc allows for source examples to be included in the documentation.
For example, see the online documentation for <a href="https://stevedonovan.github.io/winapi/api.html">winapi</a>.
The function <code>utf8_expand</code> has a <strong>@see</strong> reference to 'testu.lua' and following that link gives you a pretty-printed version of the code.</p>

<p>The line in the <code>config.ld</code> that enables this is:</p>


<pre>
examples = {<span class="string">'examples'</span>, exclude = {<span class="string">'examples/slow.lua'</span>}}
</pre>


<p>That is, all files in the <code>examples</code> folder are to be pretty-printed, except for <code>slow.lua</code> which is meant to be called from one of the examples.
To link to an example, use a reference like <code>@{testu.lua}</code> which resolves to 'examples/testu.lua.html'.</p>

<p>Examples may link back to the API documentation, for instance the example <code>input.lua</code> has a <code>@{spawn_process}</code> inline reference.</p>

<p>By default, LDoc uses a built-in Lua code 'prettifier'.
Reference links are allowed in comments, and also in code if they're enclosed in backticks.
Lua and C are known languages.</p>

<p><a href="https://github.com/xolox/lua-lxsh">lxsh</a> can be used (available from LuaRocks) if you want something more powerful.
<code>pretty='lxsh'</code> will cause <code>lxsh</code> to be used, if available.</p>

<p>Sometimes the best examples you have are your source files.
<code>prettify_files=true</code> will prettify all sources, and generate per-function links to the source.</p>

<p><a name="Readme_files"></a></p>
<h2>Readme files</h2>

<p>Like all good Github projects, Winapi has a <code>readme.md</code>:</p>


<pre>
readme = <span class="string">"readme.md"</span>
</pre>


<p>This goes under the 'Topics' global section; the 'Contents' of this document is generated from the second-level (##) headings of the readme.</p>

<p>Readme files are always processed with the current Markdown processor, but may also contain <code>@{ref}</code> references back to the documentation and to example files.
Any symbols within backticks will be expanded as references, if possible.
As with doc comments, a link to a standard Lua function like <code>@{os.execute}</code> will work as well.
Any code sections will be pretty-printed as Lua, unless the first indented line is '@plain'.
(See the source for this readme to see how it's used.)</p>

<p>Another name for <code>readme</code> is <code>topics</code>, which is more descriptive.
From LDoc 1.2, <code>readme/topics</code> can be a list of documents.
These act as a top-level table-of-contents for your documentation.
Currently, if you want them in a particular order, then use names like <code>01-introduction.md</code> etc, which sort appropriately.</p>

<p>The first line of a document may be a Markdown <code>#</code> title.
If so, then LDoc will regard the next level as the subheadings, normally second-level <code>##</code>.
But if the title is already second-level, then third-level headings will be used <code>###</code>, and so forth.
The implication is that the first heading must be top-level relative to the headings that follow, and must start at the first line.</p>

<p>A reference like <code>@{string.upper}</code> is unambiguous, and will refer to the online Lua manual.
In a project like Penlight, it can get tedious to have to write out fully qualified names like <code>@{pl.utils.printf}</code>.
The first simplification is to use the <code>package</code> field to resolve unknown references, which in this case is 'pl'.
(Previously we discussed how <code>package</code> is used to tell LDoc where the base package is in cases where the module author wishes to remain vague, but it does double-duty here.)
A further level of simplification comes from the <code>@lookup</code> directive in documents, which must start at the first column on its own line.
For instance, if I am talking about <code>pl.utils</code>, then I can say <code>@lookup utils</code> and thereafter references like <code>@{printf}</code> will resolve correctly.</p>

<p>If you look at the source for this document, you will see a <code>@lookup manual.md</code> which allows direct references to sections like <a href="../manual/manual.md.html#Readme_files">this</a> with <code>@{Readme_files|this}</code>.</p>

<p>Remember that the default is for references in backticks to be resolved; unlike @ references, it is not an error if the reference cannot be found.</p>

<p>The <em>sections</em> of a document (the second-level headings) are also references.
This particular section you are reading can be referred to as <code>@{manual.md.Readme_files}</code> - the rule is that any non-alphabetic character is replaced by an underscore.</p>

<p>Any indented blocks are assumed to be Lua, unless their first line is <code>@plain</code>.
New with 1.4 is github-markdown-style fenced code blocks, which start with three backticks optionally followed by a language.
The code continues until another three backticks is found: the language can be <code>c</code>, <code>cpp</code> or <code>cxx</code> for C/C++, anything else is Lua.</p>

<p><a name="Tag_Modifiers"></a></p>
<h2>Tag Modifiers</h2>

<p>Ay tag may have <em>tag modifiers</em>.
For instance, you may say <code>@param[type=number]</code> and this associates the modifier <code>type</code> with value <code>number</code> with this particular param tag.
A shorthand has been introduced for this common case, which is <code>@tparam &lt;type&gt; &lt;parmname&gt; &lt;comment&gt;</code>; in the same way <code>@treturn</code> is defined.</p>

<p>This is useful for larger projects where you want to provide the argument and return value types for your API, in a structured way that can be easily extracted later.</p>

<p>These types can be combined, so that "?string|number" means "either a string or a number"; "?string" is short for "?|nil|string".
However, for this last case you should usually use the <code>opt</code> modifier discussed below.</p>

<p>There is a useful function for creating new tags that can be used in <code>config.ld</code>:</p>


<pre>
<span class="function-name">tparam_alias</span>(<span class="string">'string'</span>,<span class="string">'string'</span>)
</pre>


<p>That is, <strong>@string</strong> will now have the same meaning as "@tparam string"; this also applies to the optional type syntax "?|T1|T2".</p>

<p>From 1.3, the following standard type aliases are predefined:</p>

<ul>
    <li><code>string</code></li>
    <li><code>number</code></li>
    <li><code>int</code></li>
    <li><code>bool</code> Lua 'boolean' type</li>
    <li><code>func</code> 'function' (using 'function' would conflict with the type)</li>
    <li><code>tab</code> 'table'</li>
    <li><code>thread</code></li>
</ul>

<p>When using 'colon-style' (<a href="../examples/colon.lua.html#">colon.lua</a>) it's possible to directly use types by prepending them with '!'; '?' is also naturally understood.</p>

<p>The exact form of <code>&lt;type&gt;</code> is not defined, but here is one suggested scheme:</p>

<ul>
    <li><code>number</code>  -- a plain type</li>
    <li><code>Bonzo</code>   -- a known type; a reference link will be generated</li>
    <li><code>{string,number}</code>  -- a 'list' tuple of two values, built from type expressions</li>
    <li><code>{A=string,N=number}</code> -- a 'struct', ditto (But it's often better to create a named table and refer to it)</li>
    <li><code>{Bonzo,...}</code>   -- an array of Bonzo objects</li>
    <li><code>{[string]=Bonzo,...}</code> -- a map of Bonzo objects with string keys</li>
    <li><code>Array(Bonzo)</code> -- (assuming that Array is a container type)</li>
</ul>

<p>The <code>alias</code> function within configuration files has been extended so that alias tags can be defined as a tag plus a set of modifiers.
So <code>tparam</code> is defined as:</p>


<pre>
<span class="function-name">alias</span>(<span class="string">'tparam'</span>,{<span class="string">'param'</span>,modifiers={<span class="global">type</span>=<span class="string">"$1"</span>}})
</pre>


<p>As an extension, you're allowed to use <strong>@param</strong> tags in table definitions.
This makes it possible to use type aliases like <strong>@string</strong> to describe fields, since they will expand to 'param'.</p>

<p>Another modifier understood by LDoc is <code>opt</code>. For instance,</p>


<pre>
<span class="comment">---- testing [opt]
</span><span class="comment">-- @param one
</span><span class="comment">-- @param[opt] two
</span><span class="comment">-- @param three
</span><span class="comment">-- @param[opt] four
</span><span class="keyword">function</span> <span class="function-name">fun</span> (one,two,three,four)
<span class="keyword">end</span>
<span class="comment">----&gt; displayed as: fun (one [, two], three [, four])</span>
</pre>


<p>A more typical Lua API would have a chain of optional arguments, like so:</p>


<pre>
<span class="comment">---- a chain of options
</span><span class="comment">-- @param one
</span><span class="comment">-- @param[opt] two
</span><span class="comment">-- @param[optchain] three
</span><span class="comment">-- @param[optchain] four
</span><span class="keyword">function</span> <span class="function-name">fun</span> (one,two,three,four)
<span class="keyword">end</span>
<span class="comment">----&gt; displayed as: fun (one [, two [, three [, four]]])</span>
</pre>


<p>This is a bit tedious to type, so the rule is that a series of 'opt' modifiers will be interpreted as 'opt', 'optchain',....
If you want to be explicit, then do <code>convert_opt=true</code> in your <code>config.ld</code>.</p>

<p>If a value is given for <code>opt</code>then LDoc can present this as the default value for this optional argument.</p>

<p>This modifier can also be used with typed param aliases.</p>


<pre>
<span class="comment">--- a function with typed args.
</span><span class="comment">-- If the Lua function has varargs, then
</span><span class="comment">-- you may document an indefinite number of extra arguments!
</span><span class="comment">-- @string name person's name
</span><span class="comment">-- @int age
</span><span class="comment">-- @string[opt='gregorian'] calendar optional calendar
</span><span class="comment">-- @int[opt=0] offset optional offset
</span><span class="comment">-- @treturn string
</span><span class="keyword">function</span> <span class="function-name">one</span> (name,age,...)
<span class="keyword">end</span>
<span class="comment">----&gt; displayed as: one (name, age [, calendar='gregorian' [, offset=0]])</span>
</pre>


<p>(See <a href="../examples/four.lua.html#">four.lua</a>)</p>

<p>An experimental feature in 1.4 allows different 'return groups' to be defined.
There may be multiple <strong>@return</strong> tags, and the meaning of this is well-defined, since Lua functions may return multiple values.
However, being a dynamic language it may return a single value if successful and two values (<code>nil</code>,an error message) if there is an error.
This is in fact the convention for returning 'normal' errors (like 'file not found') as opposed to parameter errors (like 'file must be a string') that are often raised as errors.</p>

<p>Return groups allow a documenter to specify the various possible return values of a function, by specifying <em>number</em> modifiers.
All <code>return</code> tags with the same digit modifier belong together as a group:</p>


<pre>
<span class="comment">-----
</span><span class="comment">-- function with return groups.
</span><span class="comment">-- @return[1] result
</span><span class="comment">-- @return[2] nil
</span><span class="comment">-- @return[2] error message
</span><span class="keyword">function</span> <span class="function-name">mul1</span>() ... <span class="keyword">end</span>
</pre>


<p>This is the first function in <a href="../examples/multiple.lua.html#">multiple.lua</a>, and the output shows how return groups are presented, with an <strong>Or</strong> between the groups.</p>

<p>This is rather clumsy, and so there is a shortcut, the <strong>@error</strong> tag which achieves the same result, with helpful type information.</p>

<p>Currently the <code>type</code>,<code>opt</code> and <code>&lt;digit&gt;</code> modifiers are the only ones known and used by LDoc when generating HTML output.
However, any other modifiers are allowed and are available for use with your own templates or for extraction by your own tools.</p>


<p><a name="Fields_allowed_in__config_ld_"></a></p>
<h2>Fields allowed in <code>config.ld</code></h2>

<p><em>Same meaning as the corresponding parameters:</em></p>

<ul>
    <li><code>file</code>  a file or directory containing sources. In <code>config.ld</code> this can also be a table of files and directories.</li>
    <li><code>project</code> name of project, used as title in top left</li>
    <li><code>title</code> page title, default 'Reference'</li>
    <li><code>package</code> explicit base package name; also used for resolving references in documents</li>
    <li><code>all</code> show local functions, etc as well in the docs</li>
    <li><code>format</code> markup processor, can be 'plain' (default), 'markdown' or 'discount'</li>
    <li><code>output</code> output name (default 'index')</li>
    <li><code>dir</code> directory for output files (default 'doc')</li>
    <li><code>colon</code> use colon style, instead of @ tag style</li>
    <li><code>boilerplate</code> ignore first comment in all source files (e.g. license comments)</li>
    <li><code>ext</code> extension for output (default 'html')</li>
    <li><code>one</code> use a one-column layout</li>
    <li><code>style</code>, <code>template</code>: together these specify the directories for the style and and the template.

<pre>
In <span class="backtick">`config.ld`</span> they may also be <span class="backtick">`true`</span>, meaning use the same directory as the configuration file.
</pre>
</li>
    <li><code>merge</code> allow documentation from different files to be merged into modules without explicit <strong>@submodule</strong> tag</li>
    <li><code>icon</code> an image that will be displayed under the project name on all pages</li>
    <li><code>multimodule</code> allow using @module, @script, @file, etc. multiple times in a file</li>
</ul>

<p><em>These only appear in the configuration file:</em></p>

<ul>
    <li><code>description</code> a short project description used under the project title</li>
    <li><code>full_description</code> when you <em>really</em> need a longer project description</li>
    <li><code>examples</code> a directory or file: can be a table</li>
    <li><code>readme</code> or <code>topics</code> readme files (to be processed with Markdown)</li>
    <li><code>pretty</code> code prettify 'lua' (default) or 'lxsh'</li>
    <li><code>prettify_files</code> prettify the source as well and make links to it; if its value is "show" then also index the source files.</li>
    <li><code>charset</code> use if you want to override the UTF-8 default (also <strong>@charset</strong> in files)</li>
    <li><code>sort</code> set if you want all items in alphabetical order</li>
    <li><code>no_return_or_parms</code> don't show parameters or return values in output</li>
    <li><code>no_lua_ref</code> stop obsessively trying to create references to standard Lua libraries</li>
    <li><code>backtick_references</code> whether references in backticks will be resolved.

<pre>
Happens by default when using Markdown. When explicit will expand non-references <span class="keyword">in</span> backticks into <span class="backtick">`&lt;code&gt;`</span> elements
</pre>
</li>
    <li><code>plain</code> set to true if <code>format</code> is set but you don't want code comments processed</li>
    <li><code>wrap</code> set to true if you want to allow long names to wrap in the summaries</li>
    <li><code>manual_url(url)</code> point to an alternative or local location for the Lua manual, e.g. 'manual_url file:///D:/dev/lua/projects/lua-5.1.4/doc/manual.html'.

<pre>
Remember it is a <span class="keyword">function</span>!
</pre>
</li>
    <li><code>no_summary</code> suppress the Contents summary</li>
    <li><code>custom_tags</code> define some new tags, which will be presented after the function description.

<pre>
The format is <span class="backtick">`{&lt;name&gt;,[title=&lt;name&gt;,}{hidden=false,}{format=nil}}`</span>.
For instance <span class="backtick">`custom_tags={'remark',title='Remarks'}`</span> will add a little <span class="backtick">`Remarks`</span> section to the docs <span class="keyword">for</span> any <span class="keyword">function</span> containing this tag.
<span class="backtick">`format`</span> can be a <span class="keyword">function</span> - <span class="keyword">if</span> <span class="keyword">not</span> present the default formatter will be used, e.g. Markdown
</pre>
</li>
    <li><code>custom_see_handler(pat,handler)</code> function that filters see-references</li>
    <li><code>custom_display_name_handler(item, default_handler)</code> function that formats an item's name.

<pre>
The arguments are the item <span class="keyword">and</span> the default <span class="keyword">function</span> used to format the name.
For example, to show an icon <span class="keyword">or</span> label beside any <span class="keyword">function</span> tagged with a certain tag:

``<span class="backtick">`lua
-- define a @callback tag:
custom_tags = { { 'callback', hidden = true } }

-- show a label beside functions tagged with @callback.
custom_display_name_handler = function(item, default_handler)
if item.type == 'function' and item.tags.callback then
    return item.name .. ' [callback]'
end
return default_handler(item)
end
`</span>``
</pre>
</li>
    <li><code>not_luadoc</code> set to <code>true</code> if the docs break LuaDoc compatibility</li>
    <li><code>no_space_before_args</code> set to <code>true</code> if you do not want a space between a function's name and its arguments.</li>
    <li><code>template_escape</code> overrides the usual '#' used for Lua code in templates.

<pre>
This needs to be changed <span class="keyword">if</span> the output format is Markdown, <span class="keyword">for</span> instance.
</pre>
</li>
    <li><code>user_keywords</code> A list of keywords that will be marked in "prettified" code.

<pre>
Useful <span class="keyword">if</span> you want to display your own functions <span class="keyword">in</span> a special way.
Each keyword may be styled <span class="function-name">differently</span> (using CSS).
Only works when <span class="backtick">`pretty`</span> is set <span class="function-name">to</span> <span class="string">'lua'</span> (the default).
</pre>
</li>
    <li><code>postprocess_html</code> function that allows a last-minute modification to the produced HTML page.

<pre>
The arguments are the raw HTML <span class="function-name">that</span><span class="string">'s intended to be written out (a string), and the module object.
The string this function returns will be what'</span>s actually gets written out.
</pre>
</li>
    <li><code>favicon</code> A link to an image that browser's will display as each page's icon.</li>
</ul>

<p><em>Available functions are:</em></p>

<ul>
    <li><code>import(obj)</code> exposes Lua object <code>obj</code> to config.ld (enabled with <code>--unsafe_no_sandbox</code>)</li>
    <li><code>alias(a,tag)</code> provide an alias <code>a</code> for the tag <code>tag</code>, for instance <code>p</code> as short for <code>param</code></li>
    <li><code>add_language_extension(ext,lang)</code> here <code>lang</code> may be either 'c' or 'lua', and <code>ext</code> is an extension to be recognized as this language</li>
    <li><code>add_section</code></li>
    <li><code>new_type(tag,header,project_level)</code> used to add new tags, which are put in their own section <code>header</code>. They may be 'project level'.</li>
    <li><code>tparam_alias(name,type)</code> for instance, you may wish that <code>Object</code> becomes a new tag alias that means <code>@tparam Object</code>.</li>
    <li><code>custom_see_handler(pattern,handler)</code>. If a reference matches <code>pattern</code>, then the extracted values will be passed to <code>handler</code>.

<pre>
It is expected to <span class="keyword">return</span> link text <span class="keyword">and</span> a suitable URI.
(This match will happen before default processing.)
</pre>

<a name="Importing_Lua_Objects"></a>
<h2>Importing Lua Objects</h2></li>
</ul>

<p>The <code>import</code> function is available to gain access to built-in Lua functions &amp; objects.</p>


<pre>
<span class="keyword">local</span> <span class="global">print</span> = <span class="function-name">import</span>(<span class="string">"print"</span>)
<span class="keyword">local</span> <span class="global">string</span> = <span class="function-name">import</span>(<span class="string">"string"</span>)

<span class="keyword">for</span> _, s <span class="keyword">in</span> <span class="global">ipairs</span>({<span class="global">string</span>.<span class="function-name">split</span>(<span class="string">"Hello world!"</span>)}) <span class="keyword">do</span>
    <span class="global">print</span>(s)
<span class="keyword">end</span>
</pre>


<p><a name="Annotations_and_Searching_for_Tags"></a></p>
<h2>Annotations and Searching for Tags</h2>

<p>Annotations are special tags that can be used to keep track of internal development status.
The known annotations are 'todo', 'fixme' and 'warning'.
They may occur in regular function/table doc comments, or on their own anywhere in the code.</p>


<pre>
<span class="comment">--- Testing annotations
</span><span class="comment">-- @module annot1
</span>...
<span class="comment">--- first function.
</span><span class="comment">-- @todo check if this works!
</span><span class="keyword">function</span> annot1.<span class="function-name">first</span> ()
    <span class="keyword">if</span> boo <span class="keyword">then</span>

    <span class="keyword">end</span>
    <span class="comment">--- @fixme what about else?
</span><span class="keyword">end</span>
</pre>


<p>Although not currently rendered by the template as HTML, they can be extracted by the <code>--tags</code> command, which is given a comma-separated list of tags to list.</p>


<pre>
D:\dev\lua\ldoc\tests&gt; ldoc <span class="comment">--tags todo,fixme annot1.lua
</span>d:\dev\lua\ldoc\tests\annot1.lua:<span class="number">14</span>: first: todo check <span class="keyword">if</span> this works!
d:\dev\lua\ldoc\tests\annot1.lua:<span class="number">19</span>: first-fixme1: fixme what about <span class="keyword">else</span>?
</pre>


<p><a name="Generating_HTML"></a></p>
<h2>Generating HTML</h2>

<p>LDoc, like LuaDoc, generates output HTML using a template, in this case <code>ldoc/html/ldoc_ltp.lua</code>.
This is expanded by the powerful but simple preprocessor devised originally by <a href="http://lua-users.org/wiki/SlightlyLessSimpleLuaPreprocessor">Rici Lake</a> which is now part of Penlight.
There are two rules - any line starting with '#' is Lua code, which can also be embedded with '$(...)'.</p>


<pre>
&lt;h2&gt;Contents&lt;/h2&gt;
&lt;ul&gt;
# <span class="keyword">for</span> kind,items <span class="keyword">in</span> <span class="global">module</span>.<span class="function-name">kinds</span>() <span class="keyword">do</span>
&lt;li&gt;&lt;a href=<span class="string">"#$(no_spaces(kind))"</span>&gt;$(kind)&lt;/a&gt;&lt;/li&gt;
# <span class="keyword">end</span>
&lt;/ul&gt;
</pre>


<p>This is then styled with <code>ldoc.css</code>.
Currently the template and stylesheet is very much based on LuaDoc, so the results are mostly equivalent; the main change that the template has been more generalized.
The default location (indicated by '!') is the directory of <code>ldoc_ltp.lua</code>.</p>

<p>You will notice that the built-in templates and stylesheets end in <code>.lua</code>; this is simply to make it easier for LDoc to find them.
Where you are customizing one or both of the template and stylesheet, they will have their usual extensions.</p>

<p>You may customize how you generate your documentation by specifying an alternative style sheet and/or template, which can be deployed with your project.
The parameters are <code>--style</code> and <code>--template</code>, which give the directories where <code>ldoc.css</code> and <code>ldoc.ltp</code> are to be found.
If <code>config.ld</code> contains these variables, they are interpreted slightly differently; if they are true, then it means 'use the same directory as config.ld'.
Otherwise they must be a valid directory relative to the ldoc invocation.</p>

<p>An example of fully customized documentation is <code>tests/example/style</code>: this is what you could call 'minimal Markdown style' where there is no attempt to tag things (except emphasizing parameter names).
The narrative alone <em>can</em> to be sufficient, if it is written well.</p>

<p>There are three other stylesheets available in LDoc since 1.4; the first is <code>ldoc_one.css</code> which is what you get from <code>one=true</code> and the second is <code>ldoc_pale.css</code>.
This is a lighter theme which might give some relief from the heavier colours of the default.
You can use this style with <code>style="!pale"</code> or <code>-s !pale</code>.
See the <a href="http://stevedonovan.github.io/lake/modules/lakelibs.html">Lake</a> documentation as an example of its use.
With 1.4.3 there is also the <code>style='!fixed'</code> where the left navigation panel is fixed and does not scroll with the rest of the document; you may find this assists navigation in complex modules and documents.</p>

<p>Of course, there's no reason why LDoc must always generate HTML.
<code>--ext</code> defines what output extension to use; this can also be set in the configuration file.
So it's possible to write a template that converts LDoc output to LaTex, for instance.
The separation of processing and presentation makes this kind of new application possible with LDoc.</p>

<p>From 1.4, LDoc has some limited support for generating Markdown output, although only for single files currently.
Use <code>--ext md</code> for this.  'ldoc/html/ldoc<em>md</em>ltp.lua' defines the template for Markdown, but this can be overridden with <code>template</code> as above.
It's another example of minimal structure, and provides a better place to learn about these templates than the rather elaborate default HTML template.</p>

<p><a name="Internal_Data_Representation"></a></p>
<h2>Internal Data Representation</h2>

<p>The <code>--dump</code> flag gives a rough text output on the console.
But there is a more customizeable way to process the output data generated by LDoc, using the <code>--filter</code> parameter.
This is understood to be a fully qualified function (module + name).
For example, try:</p>


<pre>
$ ldoc <span class="comment">--filter pl.pretty.dump mylib.c</span>
</pre>


<p>to see a raw dump of the data.
(Simply using <code>dump</code> as the value here would be a shorthand for <code>pl.pretty.dump</code>.)
This is potentially very powerful, since you may write arbitrary Lua code to extract the information you need from your project.</p>

<p>For instance, a file <code>custom.lua</code> like this:</p>


<pre>
<span class="keyword">return</span> {
    filter = <span class="keyword">function</span> (t)
        <span class="keyword">for</span> _, mod <span class="keyword">in</span> <span class="global">ipairs</span>(t) <span class="keyword">do</span>
            <span class="global">print</span>(mod.<span class="global">type</span>,mod.name,mod.summary)
        <span class="keyword">end</span>
    <span class="keyword">end</span>
}
</pre>


<p>Can be used like so:</p>


<pre>
~/ldoc/tests/example$ ldoc <span class="comment">--filter custom.filter mylib.c
</span><span class="global">module</span>  mylib   A sample C extension.
</pre>


<p>The basic data structure is straightforward: it is an array of 'modules' (project-level entities, including scripts) which each contain an <code>item</code> array (functions, tables and so forth).</p>

<p>For instance, to find all functions which don't have a <strong>@return</strong> tag:</p>


<pre>
<span class="keyword">return</span> {
    filter = <span class="keyword">function</span> (t)
        <span class="keyword">for</span> _, mod <span class="keyword">in</span> <span class="global">ipairs</span>(t) <span class="keyword">do</span>
            <span class="keyword">for</span> _, item <span class="keyword">in</span> <span class="global">ipairs</span>(mod.items) <span class="keyword">do</span>
            <span class="keyword">if</span> item.<span class="global">type</span> == <span class="string">'function'</span> <span class="keyword">and</span> <span class="keyword">not</span> item.ret <span class="keyword">then</span>
                <span class="global">print</span>(mod.name,item.name,mod.file,item.lineno)
            <span class="keyword">end</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
}
</pre>


<p>The internal naming is not always so consistent; <code>ret</code> corresponds to <strong>@return</strong>, and <code>params</code> corresponds to <strong>@param</strong>.
<code>item.params</code> is an array of the function parameters, in order; it is also a map from these names to the individual descriptions of the parameters.
<code>item.modifiers</code> is a table where the keys are the tags and the values are arrays of modifier tables.
The standard tag aliases <code>tparam</code> and <code>treturn</code> attach a <code>type</code> modifier to their tags.</p>




</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/ldoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2024-07-22 09:36:19 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
